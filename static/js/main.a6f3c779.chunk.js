(this["webpackJsonprich-text-editor"]=this["webpackJsonprich-text-editor"]||[]).push([[0],{156:function(e,t,n){e.exports=n(350)},161:function(e,t,n){},162:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},316:function(e,t,n){},318:function(e,t,n){},346:function(e,t){},350:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(22),c=n.n(r),o=(n(161),n(162),n(163),n(67)),i=n(33),u=n(49),s=n(2),m=n(1),d=n(18),f=n(24),E=(n(87),["numbered-list","bulleted-list"]),b=([].concat(E,["heading-one","heading-two","block-quote","code-block"]),{"mod+b":"bold","mod+i":"italic","mod+u":"underlined","mod+`":"code"}),g=function(e,t){var n=m.a.nodes(e,{match:function(e){return e.type===t}});return!!Object(s.a)(n,1)[0]},p=function(e,t){var n=g(e,t),a=E.includes(t);if(m.h.unwrapNodes(e,{match:function(e){return E.includes(e.type)},split:!0}),m.h.setNodes(e,{type:n?"paragraph":a?"list-item":t}),!n&&a){var l={type:t,children:[]};m.h.wrapNodes(e,l)}},h=function(e,t){var n=function(e,t){var n=m.a.nodes(e,{match:function(e){return!0===e[t]},mode:"all"});return!!Object(s.a)(n,1)[0]}(e,t);m.h.setNodes(e,Object(f.a)({},t,!n||null),{match:Text.isText,split:!0})},v=function(e,t){var n=m.a.marks(e);return!!n&&!0===n[t]},y=function(e,t){v(e,t)?m.a.removeMark(e,t):m.a.addMark(e,t,!0)},O=function(e){var t=m.a.nodes(e,{match:function(e){return"link"===e.type}});return!!Object(s.a)(t,1)[0]},k=function(e,t){O(e)&&function(e){m.h.unwrapNodes(e,{match:function(e){return"link"===e.type}})}(e);var n=e.selection,a=n&&m.f.isCollapsed(n),l={type:"link",url:t,children:a?[{text:t}]:[]};a?m.h.insertNodes(e,l):(m.h.wrapNodes(e,l,{split:!0}),m.h.collapse(e,{edge:"end"}))},N=n(155),S=(n(170),n(5)),C=n(41),T=n.n(C);var w=n(10),j=n.n(w),x=(n(69),l.a.memo((function(e){var t=e.format,n=e.children,a=Object(d.d)();return l.a.createElement("button",{className:j()("btn btn-link",{active:v(a,t)}),onClick:function(e){e.preventDefault(),y(a,t)}},n)}))),_=l.a.memo((function(e){var t=e.format,n=e.children,a=Object(d.d)();return l.a.createElement("button",{className:j()("btn btn-link",{active:g(a,t)}),onClick:function(e){e.preventDefault(),p(a,t)}},n)})),D=(n(171),function(e){var t=e.children,n=Object(d.d)(),r=Object(a.useRef)(null),c=Object(a.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(a.useState)(!1),f=Object(s.a)(m,2),E=f[0],b=f[1];return l.a.createElement("div",{className:"link-button"},l.a.createElement("form",{className:j()("input-group",{"d-none":!E}),onSubmit:function(e){e.preventDefault(),function(e,t){e.selection&&k(e,t)}(n,i),b(!1)}},l.a.createElement("input",{ref:r,type:"text",className:"form-control",value:i,placeholder:"Ex.: www.google.com",onChange:function(e){return u(e.target.value)},onBlur:function(e){return b(!1)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("input",{className:"btn btn-outline-secondary",type:"submit",value:"Add"}))),l.a.createElement("button",{className:j()("btn btn-link",{active:O(n),"d-none":E}),onClick:function(){r.current.focus(),b(!E)}},t))}),R=(n(172),function(){var e=Object(a.useRef)(),t=Object(d.d)(),n=t.selection;return Object(a.useEffect)((function(){var a=e.current;if(a)if(n&&d.b.isFocused(t)&&!m.f.isCollapsed(n)&&""!==m.a.string(t,n)){var l=window.getSelection().getRangeAt(0).getBoundingClientRect();a.style.opacity=1,a.style.top="".concat(l.top+window.pageYOffset-a.offsetHeight,"px"),a.style.left="".concat(l.left+window.pageXOffset-a.offsetWidth/2+l.width/2,"px")}else a.removeAttribute("style")}),[n,t]),Object(r.createPortal)(l.a.createElement("div",{ref:e,className:"inline-toolbar-slate"},l.a.createElement(x,{format:"bold"},l.a.createElement(S.a,null)),l.a.createElement(x,{format:"italic"},l.a.createElement(S.d,null)),l.a.createElement(x,{format:"underlined"},l.a.createElement(S.i,null))),document.body)}),I=(n(173),function(e){var t=e.children,n=e.classList;return l.a.createElement("div",{className:j()(n,"toolbar")},t)});function B(e){var t=e.attributes,n=e.children,a=e.element;switch(a.type){case"link":return l.a.createElement("a",Object.assign({},t,{href:a.url}),n);case"block-quote":return l.a.createElement("blockquote",t,n);case"bulleted-list":return l.a.createElement("ul",t,n);case"heading-one":return l.a.createElement("h1",t,n);case"heading-two":return l.a.createElement("h2",t,n);case"list-item":return l.a.createElement("li",t,n);case"numbered-list":return l.a.createElement("ol",t,n);default:return l.a.createElement("p",t,n)}}var K=function(e){var t=e.attributes,n=e.children,a=e.leaf,r=n;return a.bold&&(r=l.a.createElement("strong",null,r)),a.code&&(r=l.a.createElement("code",null,r)),a.italic&&(r=l.a.createElement("em",null,r)),a.underlined&&(r=l.a.createElement("u",null,r)),l.a.createElement("span",t,r)},L=function(e){e.readOnly,e.classList;var t=Object(a.useMemo)((function(){return Object(N.a)(Object(d.e)(Object(m.i)()))}),[]),n=Object(a.useCallback)((function(e){return l.a.createElement(B,e)}),[]),r=Object(a.useCallback)((function(e){return l.a.createElement(K,e)}),[]),c=Object(a.useState)([{type:"paragraph",children:[{text:""}]}]),o=Object(s.a)(c,2),i=o[0],u=o[1];return l.a.createElement(d.c,{editor:t,value:i,onChange:function(e){return u(e)}},l.a.createElement(R,null),l.a.createElement(I,null,l.a.createElement(x,{format:"bold"},l.a.createElement(S.a,null)),l.a.createElement(x,{format:"italic"},l.a.createElement(S.d,null)),l.a.createElement(x,{format:"underlined"},l.a.createElement(S.i,null)),l.a.createElement(x,{format:"code"},l.a.createElement(S.b,null)),l.a.createElement(D,null,l.a.createElement(S.e,null)),l.a.createElement(_,{format:"heading-one"},l.a.createElement(S.c,null)),l.a.createElement(_,{format:"heading-two"},l.a.createElement(S.c,null),l.a.createElement("sub",null,"2")),l.a.createElement(_,{format:"code-block"},l.a.createElement(S.b,null)),l.a.createElement(_,{format:"block-quote"},l.a.createElement(S.h,null)),l.a.createElement(_,{format:"numbered-list"},l.a.createElement(S.f,null)),l.a.createElement(_,{format:"bulleted-list"},l.a.createElement(S.g,null))),l.a.createElement(d.a,{placeholder:"Well, hello there!",renderElement:n,renderLeaf:r,autoFocus:!0,onDOMBeforeInput:function(e){switch(e.inputType){case"formatBold":return h(t,"bold");case"formatItalic":return h(t,"italic");case"formatUnderline":return h(t,"underline");case"formatLink":return p(t,"link");default:return null}},onKeyDown:function(e){return function(e,t){e.ctrlKey&&Object.entries(b).forEach((function(n){var a=Object(s.a)(n,2),l=a[0],r=a[1];T()(l,e)&&y(t,r)})),"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),t.exec({type:"insert_text",text:"\n"})),"Tab"===e.key&&g(t,"code-block")&&(e.preventDefault(),t.exec({type:"insert_text",text:"\t"}))}(e,t)}}))},M=n(16),A=n(6),F=function(e){return function(t,n){var a=n().editorReducer.getCurrentContent(),l=e.getCurrentContent();a!==l&&t({type:"NEW_MESSAGE",payload:Object(A.convertToRaw)(l)}),t(function(e){return{type:"SET_EDITOR_STATE",payload:e}}(e))}},W=n(147),U=n.n(W),X=n(148),q=n.n(X),J=n(149),G=n.n(J),P=n(85),V=n.n(P),z=n(150),H=n.n(z),Y=(n(309),[H()({prism:V.a})]),Z=(n(310),function(e){var t=e.children,n=e.classList;return l.a.createElement("div",{className:j()(n,"static-toolbar position-relative")},t)}),$=/(#[A-Z0-9a-z\xc0-\xd6\xd8-\xf6\xf8-\xff]+)/g,Q=n(151),ee=n.n(Q)()();var te=[{strategy:function(e,t){var n=ee.match(e.getText());"undefined"!==typeof n&&null!==n&&n.forEach((function(e){return t(e.index,e.lastIndex)}))},component:function(e,t){var n=e.children;return l.a.createElement("a",Object.assign({},t,{className:"link",href:n}),n)}},{strategy:function(e,t,n){!function(e,t,n){for(var a,l,r=t.getText();null!==(a=e.exec(r));)n(l=a.index,l+a[0].length)}($,e,t)},component:function(e,t){var n=e.children;return l.a.createElement("span",Object.assign({},t,{className:"hashtag text-muted"}),n)}}],ne=(n(316),function(e){var t=e.active,n=e.onToggle,a=e.style,r=e.label;return l.a.createElement("button",{className:j()("btn btn-link style-button",{"btn-active":t}),onMouseDown:function(e){e.preventDefault(),n(a)}},r)}),ae=[{label:l.a.createElement(l.a.Fragment,null,l.a.createElement(S.c,null),l.a.createElement("strong",null,l.a.createElement("sub",null,"1"))),style:"header-one"},{label:l.a.createElement(l.a.Fragment,null,l.a.createElement(S.c,null),l.a.createElement("strong",null,l.a.createElement("sub",null,"2"))),style:"header-two"},{label:l.a.createElement(l.a.Fragment,null,l.a.createElement(S.c,null),l.a.createElement("strong",null,l.a.createElement("sub",null,"3"))),style:"header-three"},{label:l.a.createElement(l.a.Fragment,null,l.a.createElement(S.c,null),l.a.createElement("strong",null,l.a.createElement("sub",null,"4"))),style:"header-four"},{label:l.a.createElement(S.h,null),style:"blockquote"},{label:l.a.createElement(S.g,null),style:"unordered-list-item"},{label:l.a.createElement(S.f,null),style:"ordered-list-item"},{label:l.a.createElement(S.b,null),style:"code-block"}],le=function(e){var t=e.editorState,n=e.onToggle,a=e.classList,r=t.getSelection(),c=t.getCurrentContent().getBlockForKey(r.getStartKey()).getType();return l.a.createElement("div",{className:j()(a)},ae.map((function(e){return l.a.createElement(ne,{key:e.style,active:e.style===c,label:e.label,onToggle:n,style:e.style})})))},re=[{label:l.a.createElement(S.a,null),style:"BOLD"},{label:l.a.createElement(S.d,null),style:"ITALIC"},{label:l.a.createElement(S.i,null),style:"UNDERLINE"},{label:l.a.createElement(S.b,null),style:"CODE"}],ce=function(e){var t=e.editorState,n=e.onToggle,a=e.classList,r=t.getCurrentInlineStyle();return l.a.createElement("div",{className:j()(a,"d-flex flex-nowrap")},re.map((function(e,t){return l.a.createElement(ne,{active:r.has(e.style),key:e.style,label:e.label,onToggle:n,style:e.style})})))},oe=(n(317),n(318),G()({placeholder:"Enter an URL..."})),ie=oe.LinkButton,ue=q()(),se=ue.InlineToolbar,me=function(e){var t=e.readOnly,n=e.classList,r=Object(u.c)((function(e){return e.editorReducer})),c=Object(u.b)(),o=Object(a.useRef)(),i=function(e){c(F(A.RichUtils.toggleInlineStyle(r,e)))};Object(a.useEffect)((function(){c({type:"WS_CONNECT",host:"/"})}),[c]);return l.a.createElement("div",{tabIndex:0,className:j()("editor",n),onClick:function(){return o.current.focus()},role:"textbox",onKeyDown:function(){}},!t&&l.a.createElement(Z,null,l.a.createElement(le,{editorState:r,onToggle:function(e){c(F(A.RichUtils.toggleBlockType(r,e)))}}),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){console.log(Object(A.convertToRaw)(r.getCurrentContent()))}},"Convert to Raw JS")),l.a.createElement(U.a,{editorState:r,plugins:[].concat(Object(M.a)(Y),[ue,oe]),ref:o,readOnly:t,decorators:te,onChange:function(e){var t=e.getSelection(),n=e.getCurrentContent().getBlockForKey(t.getStartKey());if("code-block"===n.getType()){var a=n.getData().merge({language:"javascript"}),l=n.merge({data:a}),r=e.getCurrentContent().merge({blockMap:e.getCurrentContent().getBlockMap().set(t.getStartKey(),l),selectionAfter:t});c(F(A.EditorState.push(e,r,"change-block-data")))}else c(F(e))},keyBindingFn:function(e){if(13===e.keyCode&&e.shiftKey)return"soft-break";var t=r.getSelection(),n=r.getCurrentContent().getBlockForKey(t.getStartKey());return"Tab"===e.key&&"code-block"===n.getType()?"code-tab":Object(A.getDefaultKeyBinding)(e)},blockStyleFn:function(e){switch(e.getType()){case"code-block":return"language-javascript";default:return null}},handleKeyCommand:function(e,t){var n=A.RichUtils.handleKeyCommand(t,e);if("code-block"===e)return c(F(A.RichUtils.toggleBlockType(t,"code-block"))),"handled";if("soft-break"===e)return c(F(A.RichUtils.insertSoftNewline(r))),"handled";if("code-tab"===e){var a=r,l=A.Modifier.replaceText(a.getCurrentContent(),a.getSelection(),"\t");c(F(A.EditorState.push(a,l,"insert-characters")))}return n?(c(F(n)),"handled"):"not-handled"}}),!t&&l.a.createElement(se,null,(function(e){return l.a.createElement("div",{className:"inline-toolbar-draft"},l.a.createElement(ce,Object.assign({editorState:r,onToggle:i},e)),l.a.createElement(ie,e))})))},de=n(39),fe=A.EditorState.createEmpty(),Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EDITOR_STATE":return t.payload;case"SET_EDITOR_TEXT":return A.EditorState.createWithContent(t.payload);default:return e}},be=n(152),ge=n(153),pe=n.n(ge),he=function(){var e=null;return function(t){return function(n){return function(a){switch(a.type){case"WS_CONNECT":null!==e&&e.close(),(e=pe()(a.host)).on("message",(function(e){t.dispatch({type:"SET_EDITOR_TEXT",payload:Object(A.convertFromRaw)(JSON.parse(e).message)})}));break;case"WS_DISCONNECT":null!==e&&e.close(),e=null,console.log("WebSocket closed");break;case"NEW_MESSAGE":e&&e.send(JSON.stringify({command:"NEW_MESSAGE",message:a.payload}));break;default:return n(a)}}}}};var ve=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):de.d)(Object(de.a)(he(),be.a));return Object(de.e)(Object(de.c)({editorReducer:Ee}),e)}(),ye=function(){return l.a.createElement(u.a,{store:ve},l.a.createElement(o.a,null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("div",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link",activeClassName:"active",to:"/draft"},"Draft")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link",activeClassName:"active",to:"/slate"},"Slate")))),l.a.createElement("div",{className:"App"},l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/slate",component:L}),l.a.createElement(i.b,{path:"/draft",component:me}),l.a.createElement(i.b,{exact:!0,path:"/"},l.a.createElement(i.a,{to:"/draft"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e,t,n){}},[[156,1,2]]]);
//# sourceMappingURL=main.a6f3c779.chunk.js.map